# Research analysi of the Yandex Real Estate service in St. Petersburg

В вашем распоряжении данные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых 
пунктов за несколько лет. Нужно научиться определять рыночную стоимость объектов недвижимости. Ваша задача — установить параметры. 
Это позволит построить автоматизированную систему: она отследит аномалии и мошенническую деятельность.

Данные записаны в одном датасете. По каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые — получены автоматически 
на основе картографических данных. Например, расстояние до центра, аэропорта, ближайшего парка и водоёма.

План работы

1) Открыть файл и ознакомиться с данными.
2) Предобработка данных: 
2.1 Посмотреть пропуски 
2.2 Посмотреть общее колличество данных 
2.3 Заполнить пропущенные значения по возможности 
2.4 Найти и устранить редкие и выбивающиеся значения 
2.5 Рассмотрите типы данных в каждом столбце и если надо-заменить его 
2.6 Изучить уникальные значения в столбце с названиями и устраните неявные дубликаты 
2.7 Устранить явные дубоикаты 
2.8 Посмотреть, сколько данных в датафрейме осталось после обработки
3) Добавьте в таблицу новые столбцы 
4)Провести исследовательский анализ данных: 
4.1 Изучить параметры объектов 
4.2 Изучить, как быстро продавались квартиры 
4.3 Изучить, какие факторы больше всего влияют на общую (полную) стоимость объекта 
4.4 Расчет средней цены одного квадратного метра в 10 населённых пунктах с наибольшим числом объявлений 
4.5 Вычислить среднюю цену каждого километра для квартир в Санкт-Петербурге и описать, как стоимость объектов зависит от расстояния до центра города.
5) Общий вывод


В работе использованы следующие библиотеки: pandas, matplotlib.

Выводы и коментарии:

Первичная обработка

1. В процессе обработки данных было выявленно, что присутствуют значительные отклонения в высоте потолков. Оставлены были значения потолка от 2 до 5 метров.
2. В данных floors_total (общая высота дома) были удалены значения выше 40 этажа.
3. Квартир, у которых 8 комнат и больше очень мало. На выборку влиять не будут. Понадобиться сгруппировать квартиры по количеству комнат, 
создав для этого отдельный столбец. Благодаря этому, пропуски в столбце living_area были заполненны медианны значениями по колличеству комнат number_of_rooms.
4. Жилая площадь может быть значительная и оснований считать, что указанные значения в 350 или 400 ошибочны - некорректно. По этому, оставить значения как есть.
5. Пропуски в столбце 'balcony' были заменены на значение ноль, так как скорей всего, люди при отсутствие балконов значение ноль просто не проставляли, 
а оставляли значение не заполненным. Квартиры с 1 и 2 комнатами, записаны как имеющие 4 или 5 балконов. Косьвенно, гипотеза подтверждается. 
Но наверника сказать нельзя. Так как кварттиры с 4 и 5 балконами нам не мешают в контексте данной жадачи, оставить данные без изменения.
6. Этажность дома floors_total и наименование населённого пункта locality_name имеют пропуски. Пропуски были удалены, так как не имея точного адреса, 
нет инструмента для опреднеления названия населенного пункта и этажности дома.
7. Пропуски в столбце 'is_apartment' заменены на значение (False), так как не апартаментов гораздо больше и можно предположить, что люди когда заполняли, 
не ставили значения подразумевая, что данный объект не является апартаментами.
8. Пропуски в строке площадь кухни - kitchen_area заменены на медианые значения.
9. Далее рассматривались столбцы airports_nearest, cityCenters_nearest, parks_around3000, parks_nearest, ponds_around3000, ponds_nearest, days_exposition. 
В данных есть пропуски, но их природа не ясна. Если бы не было значения 0, можно было бы предположить, что пропуски в столбцах ponds_around3000 и 
parks_around3000 означали бы, что водоёмы и парки просто отсутствуют и значение не ставится. Но присутствие значения 0 говорит нам об обратном. 
Пропусков в столбцах parks_nearest и ponds_nearest слишком много. Замена недостающих значений в этих столбцах может слишком сильно изменить результат. 
Пропуски в airports_nearest и cityCenters_nearest в теории можно было бы заменить медианой, но так как причина отсутствия значений не ясна, 
и отсутствующие данные составляют более 10%, то пропуски оставить без изменения.

Была произведена замена типа столбцов. Значения столбцов floors_total и balcony имеют тип float64. Это не верно, так как количество этажей и балконов 
не может быть числом дробным. Замена на int(целые числа) была логичной. Ещё была замена типа столбца first_day_exposition сobject на datetime. 
При изучение столбца locality_name обнаружено много похожишь наименований, но которые по смыслу одинаковы, но различаются по написанию. 
Они были заменены на 'поселок'. Количество уникальных названий с 281 сократилось до 251. 
В обработке данных явные дубликаты не выявлены.

Для лучшего анализа данных были добавлены столбцы:

1) price_of_one_square_meter цена одного квадратного метра и округленная до целых чисел.
2) weekday со значениями дня недели публикации объявления (0 — понедельник, 1 — вторник и так далее).
3) month в котором были бы месяца из колонки first_day_exposition.
4) year в котором были бы года из колонки first_day_exposition.
5) floor_type в таблице с типом этажа квартиры (значения — «первый», «последний», «другой»)
6) distance_to_the_city_center с расстоянием до центра города в километрах.

В результате исследовательского анализа выявленны следующие детали:

1) В диапазоне от 30 до 75 метров общей площади находится большая часть квартир. Больше всего объектов с площадью около 40 метров. Однушки и студии
 самые популярные. 
2) По жилой площади видны два пика-от 15 до 20 метров и от 26 до 32 метров. Это соответствует однушкам и двушкам. 
3) Большинство кухонь имеют площадь от 5 до 12 метров. 
4) Цена на объекты конечно сильно различается, но все же большая часть находится в диапазоне от 2.5 до 10 млн.
5) Продажи однушек, двушек и трешек относительно велики. Двушки в объявлениях встречаются чаще всего. 
6) Высота потолков самая распространённая 2,5-2,55 метра. 2,7-2,8 метра ещё одна из распространённых высот. Так же встречается высота потолка 3,1 метра. 
Скорей всего "сталинка". 
Высота от 3,1 до 4 метров уже редка, а свыше 4 метров единичные объекты, так же как и высота менее 2,5 метров.
7) Больше всего предложений есть со второго по 6 этажи. Скорее всего это связанно с тем, что большое количество домов в 5 этажей было построено и 
плюс много живут на средних 
этажах людей из 9 и 10 этажек.
8) Большое колличество 5 этажных домов и 9 этажных домов. Так же видно, что популярны 16 и 25 этажные объекты недвижимости.
9) Предложений на первом и на последних этажах примерно в пять раз меньше, чем всех остальных.
10) Большая часть объектов находится на удалении от центра до 20 километров.
11) Ближе 6 километров объектов у аэропорта нет, больше чем 75 километров удаления-тоже. Большая часть квартир выставленна на удалении от 10 до 40 километров.
12) Больше вчего объектов на ходятся на удаление от парка 850 метров м менее. Можно утверждать, что парков достаточное колличество и очень небольшое колличество 
квартир находятся на удаление более 1000 метров от парковых зон.
13) В мае меньше всего продаж. Декабре и январе так же имеют явный спад. Феврал, март и апрель продажи максимальны. И после майской просадки начинает 
в течение лета и осени рост до ноября месяца. Во вторник и четверг больше всего публикуется объявлений. Скорей всего это связано с тем, что подаются 
они за день, в понедельник и среду. В рабочие дни их колличество рознится не сильно, достаточно превосходя число объявлений опубликованных в выходные дни.
14) Пик продаж приходится на 7 и 9 недели. В первый месяц так же стабильно высокие показатели продаж. Можно говорить, что в среднем, продажа занимает чуть 
больше 3-х месяцев. Медианное значение 103 дня. Среднее значение 190 дней. От 45 и до 247 дней -промежуток от 1 до 3 квартиля. 
Этот промежуток можно рассматривать как нормальное время продаж. Из этого следует, что менее 45 дней ушедшие объекты можно считать быстрыми продажами, 
и более 247 дней - необычно долгими. Так же есть от 4 до 25 объявлений, которые висят годами. Так же значения более 550 дней можно считать выбросами 
и отклонениями от нормы.В процессе работы были выявленны следующие зависимости:

В процессе работы были выявленны следующие зависимости:

1. У стоимости объекта с площадью есть прямая корелляция. Цена с площадью хорошо кореллирует до 300 кв.м. Потом разброс значений очень значителен.
2. Стоимость объекта и жилая площадь так же имеют прямую зависимость. Цена с площадью хорошо кореллирует до 300 кв.м. Потом разброс значений очень значителен.
3. У цены объекта и жилой площади похожие зависимости. Цена хорошо кореллирует с жилой площадью до 160 метров. Далее разброс цен увеличивается и 
корелляция уменьшается.
4. Зависимость стоимости квартиры - прямая корелляция присутствует, но она не сильная (коэффициент корелляции 0,5).
5. У цены объекта и количества комнат хоть и наблюдается положительная зависимость, но она слабая. Велико число разбросов и случаев не вписывающихся в 
прямую зависимость (коэффициент корелляции 0,4).
6. Вслучае с зависимостью цены от этажа (первый, последний, другой), тенденция говорит о том, что цена на первые этажи ниже, чем на последние и все другие.
7. Начиная с 2014 года цена снижалась до 2016, оставалась практически без изменения в 2017, потом в 2018 году был спад и восстановление в 2019 
до уровней цен 2017 года. В целом, начиная с января по март цены снижаются, в апреле цена выше, май и июнь цены вновь снижаются. В июле подъем цен 
до уровня апреля. Далее идет снижение цены до октября и потом рост до нового конца декабря. В течение недели с понедельника по среду 
цена особо не меняется, в четверг видет рост и дальнейшее снижение в пятницу и субботу. Потом идет незначительный подъем цены в воскресенье.

В рамках исследования выявленно 10 населенных пунктов с максимальным колличеством объявлений: Санкт-Петербург, Всеволожск, Пушкин, поселок Шушары, 
поселок Мурино, Колпино, Гатчина, Петергоф, поселок Парголово, Сестрорецк. Цена за квадратный метр самая высокая в Санкт-Петербурге, 
а самая низкая во Всеволожске.

Можно отметить, что по мере удаления от центра, цена на объект снижается. На расстоянии одного километра от центра средняя стоимость квартир 
от 22 млд до 22,8 млн. Самая ощутимая потеря в цене по мере удаления от центра происходит в первые 10 км. На этом расстояние, цена в среднем 
будет составлять уже 6,8 млн. Далее, скорость снижения цены от расстояния и уменьшается и разница между 10-м и 20-м километром уже 
составляет 1.8 млн. На удаление 20 км и больше, зависимость исчезает, потому что скорее будут играть важную роль сами населенные пункты, 
качество объекта недвижимости и инфраструктура.
