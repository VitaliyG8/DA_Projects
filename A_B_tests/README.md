# A-A-B tests

Название проекта: Изучение воронки и результатов A/A/B-теста с целью повышения активности пользователей.

Описание проекта: Вы работаете в стартапе, который продаёт продукты питания. Нужно разобраться, как ведут себя пользователи вашего мобильного приложения. 
Изучите воронку продаж. Узнайте, как пользователи доходят до покупки. Сколько пользователей доходит до покупки, а сколько — «застревает» на предыдущих шагах? 
На каких именно? После этого исследуйте результаты A/A/B-эксперимента. Дизайнеры захотели поменять шрифты во всём приложении, 
а менеджеры испугались, что пользователям будет непривычно. Договорились принять решение по результатам A/A/B-теста. 
Пользователей разбили на 3 группы: 2 контрольные со старыми шрифтами и одну экспериментальную — с новыми. Выясните, какой шрифт лучше.

Описание данных: Каждая запись в логе — это действие пользователя, или событие. EventName — название события; 
DeviceIDHash — уникальный идентификатор пользователя; EventTimestamp — время события; ExpId — номер эксперимента: 246 и 247 — контрольные группы, 
а 248 — экспериментальная.

Цели работы:

1. Посмотреь, какие события есть в логах, как часто они встречаются.
2. Посчитать, сколько пользователей совершали каждое из этих событий. Посчитать долю пользователей, которые хоть раз совершали событие.
3. Предположить, в каком порядке происходят события. Все ли они выстраиваются в последовательную цепочку?
4. По воронке событий посчитать, какая доля пользователей проходит на следующий шаг воронки (от числа пользователей на предыдущем). 
То есть для последовательности событий A → B → C посчитать отношение числа пользователей с событием B к количеству пользователей с событием A, 
а также отношение числа пользователей с событием C к количеству пользователей с событием B.
5. Ответить на вопрос: На каком шаге теряете больше всего пользователей? А так же, какая доля пользователей доходит от первого события до оплаты?
6. Узнать, сколько пользователей в каждой экспериментальной группе.
7. Есть 2 контрольные группы для А/А-эксперимента, чтобы проверить корректность всех механизмов и расчётов. Проверить, находят ли статистические критерии 
разницу между выборками 246 и 247.
8. Выбрать самое популярное событие. Посчитать число пользователей, совершивших это событие в каждой из контрольных групп. Посчитать долю пользователей, 
совершивших это событие. Проверить, будет ли отличие между группами статистически достоверным. Проделать то же самое для всех других событий 
(удобно обернуть проверку в отдельную функцию). Можно ли сказать, что разбиение на группы работает корректно?
9. Сравнить результаты с каждой из контрольных групп в отдельности по каждому событию. Сравнить результаты с объединённой контрольной группой.
10. Ответить на главный вопрос: Изменение шрифта на главной странице как-то повлияет на метрики конверсии?


Содержание:

1) Открыть файл с данными и изучить общую информацию
2) Предобработка данных
3) Изучение и проверка данных
4) Изучение воронки событий
5) Изучение результатов эксперимента
6) Общий вывод


О данных:

Данные представлены одним датасетом. Названия столбцов необходимо привести к нижнему регистру и записать в "змеином" стиле. 
Создать столбец с датой и временем, а также отдельный столбец дат.
 
 
В работе использованы следующие библиотеки: pandas, matplotlib, numpy, seaborn, plotly, datetime, math, scipy.

Итоговые выводы

1. На этапе предобработки данных названия имеющихся столбцов были приведены к нижнему регистру, записаны в более понятном виде и в "змеином" стиле. 
Создан столбец с датой и временем, а также отдельный столбец с датой(datetime, date). Были удалены 413 явных дубликатов. 
Были присвоены группам удобные для работы значения(A1, A2, B).
2. В процессе изучения было выясненно, что число событий в логе 243713, при чём мы имеем 5 уникальных событий. Колличество уникальных пользователей в 
логе составляет 7551 и они в группах не пересекаются. На одного пользователя в среднем приходится 20 событий по первоначальным данным. 
Всего мы имеем логи за 2 недели, с 25 июля по 07 августа 2019 года. Однако, в результате изучения было выявленно, что одинаково полные данные есть 
только за период с 2019-07-31 21:00 по 2019-08-07 21:00. В результате того, что в дальнейшем анализ будет проводится только по однотипным логам, 
их общее кол-во сократилось на 1989 или 0.82% от общего кол-ва и составило 241724. Число пользователей уменьшилось на 13 и составило 0.17%. 
Теперь в обсалютных значениях 7538 пользователей в актуальных данных. В связи с тем, что часть логов была отсеяна(менее 1 %), 
среднее число событий на одного пользователя составляет 19. Не смотря на то, что часть логов была отсечена, 
у нас по прежнему есть достаточное кол-во логов по каждой из групп эксперимента.
3. Мы выяснили, что в воронке участвуют 4 события(которые мы рассматриваем). Это Переход на главный экран, переход на страницу с предложениями, 
переход к покупке и оплата. Самые большие потери при переходе от главной страницы к странице с предложением. А до оплаты доходят 47.7% пользователей.
4. Был проведён A/A тест, cтатистически значимых различий между двумя А-группами не обнаружено. Все корректно. Так же по результатам проверок видно, 
что статистически значимых различий между группами А1, А2 и В нет и проверка А1+А2 и В это подтверждает.
5. При проверке статистических гипотез выше мы выбрали уровень значимости равный 0.05. Было проведено 20 проверок статистических гипотез. 
Мы провели множественный тест, т.е. брали несколько выборок из одного и того же набора данных. Его особенность в том, что с каждой новой проверкой 
гипотезы растёт вероятность ошибки первого рода. При уровне значимости 0.1 каждый десятый раз можно получать ложный результат. 
Можно было бы задействовать корректировку по Бонферрони для уменьшения вероятности появления ошибок первого рода, но в данном случае это не актуально, 
т.к. p-value значительно выше уровня значимости и соответственно корректировка Бонферрони ничего не даст.
6) На основе полученных данных можно утверждать, что гипотеза о том, что изменение шрифта на главной странице как-то повлияет на метрики конверсии, 
не подтвердилась. Конечно, можно говорить о том, что у нас были данные за относительно небольшой период (одна неделя). 
И хотелось бы посмотреть динамику данных ещё за одну неделю. Но предпосылок утверждать то, что данные ещё одной недели координально изменят результат 
у нас нет, принимая во внимание полученные величины p_value. Шрифт можно не изменять.
